import { ifWins, ifDraws, ifLoses } from './elo.service';

describe('elo', () => {
  test.each([
    // 1600
    [1600, 1500, 1612, 1596, 1580],
    [1600, 1525, 1613, 1597, 1581],
    [1600, 1550, 1614, 1598, 1582],
    [1600, 1575, 1615, 1599, 1583],
    [1600, 1600, 1616, 1600, 1584],
    [1600, 1625, 1617, 1601, 1585],
    [1600, 1650, 1618, 1602, 1586],
    [1600, 1675, 1619, 1603, 1587],
    [1600, 1700, 1620, 1604, 1588],
    // 1900
    [1900, 1800, 1912, 1896, 1880],
    [1900, 1825, 1913, 1897, 1881],
    [1900, 1850, 1914, 1898, 1882],
    [1900, 1875, 1915, 1899, 1883],
    [1900, 1900, 1916, 1900, 1884],
    [1900, 1925, 1917, 1901, 1885],
    [1900, 1950, 1918, 1902, 1886],
    [1900, 1975, 1919, 1903, 1887],
    [1900, 2000, 1920, 1904, 1888],
    // 2200
    [2200, 2100, 2209, 2197, 2185],
    [2200, 2125, 2209, 2197, 2185],
    [2200, 2150, 2210, 2198, 2186],
    [2200, 2175, 2211, 2199, 2187],
    [2200, 2200, 2212, 2200, 2188],
    [2200, 2225, 2213, 2201, 2189],
    [2200, 2250, 2214, 2202, 2190],
    [2200, 2275, 2215, 2203, 2191],
    [2200, 2300, 2215, 2203, 2191],
    // 2500
    [2500, 2400, 2506, 2498, 2490],
    [2500, 2425, 2506, 2498, 2490],
    [2500, 2450, 2507, 2499, 2491],
    [2500, 2475, 2507, 2499, 2491],
    [2500, 2500, 2508, 2500, 2492],
    [2500, 2525, 2509, 2501, 2493],
    [2500, 2550, 2509, 2501, 2493],
    [2500, 2575, 2510, 2502, 2494],
    [2500, 2600, 2510, 2502, 2494],
  ])(
    'when a %d plays against %d',
    (
      playerRating,
      opponentRating,
      expectedWinsRating,
      expectedDrawsRating,
      expectedLosesRating
    ) => {
      const winsRating = ifWins(playerRating, opponentRating);
      const drawsRating = ifDraws(playerRating, opponentRating);
      const losesRating = ifLoses(playerRating, opponentRating);

      expect({ winsRating, drawsRating, losesRating }).toEqual({
        winsRating: expectedWinsRating,
        drawsRating: expectedDrawsRating,
        losesRating: expectedLosesRating,
      });
    }
  );
});
